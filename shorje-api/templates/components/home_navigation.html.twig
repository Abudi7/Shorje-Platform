<!-- Modern Home Navigation -->
<nav class="bg-white dark:bg-slate-900 shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Logo -->
            <div class="flex items-center space-x-4">
                <a href="/home" class="flex items-center space-x-3">
                    <div class="h-10 w-10 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-xl flex items-center justify-center">
                        <i class="fas fa-store text-white text-lg"></i>
                    </div>
                    <span class="text-2xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent">Ø´ÙˆØ±Ø¬ÙŠ</span>
                </a>
            </div>

            <!-- Navigation Links -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="/home" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-home ml-2"></i>
                    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
                <a href="/products" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-th-large ml-2"></i>
                    Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                </a>
                <a href="/users" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-users ml-2"></i>
                    Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                </a>
                {% if app.user %}
                <a href="/products/my" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-box ml-2"></i>
                    Ù…Ù†ØªØ¬Ø§ØªÙŠ
                </a>
                <a href="/messages" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors relative">
                    <i class="fas fa-comments ml-2"></i>
                    Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                    <span id="messagesCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </a>
                {% endif %}
                <a href="/help" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-question-circle ml-2"></i>
                    Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
                </a>
                <a href="/contact" class="text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400 font-medium transition-colors">
                    <i class="fas fa-envelope ml-2"></i>
                    Ø§ØªØµÙ„ Ø¨Ù†Ø§
                </a>
            </div>

            <!-- Right Side Actions -->
            <div class="flex items-center space-x-4">
                <!-- Theme Toggle -->
                <button id="themeToggle" onclick="toggleTheme()" class="p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                    <i id="themeIcon" class="fas fa-moon text-xl"></i>
                </button>

                <!-- Language Switcher -->
                <div class="relative">
                    <button onclick="toggleLanguage()" class="p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                        <i class="fas fa-globe text-xl"></i>
                    </button>
                    <div id="languageMenu" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700 z-50">
                        <a href="/language/ar" class="block px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                            ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                        </a>
                        <a href="/language/en" class="block px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                            ğŸ‡¬ğŸ‡§ English
                        </a>
                    </div>
                </div>

                {% if app.user %}
                <!-- Notifications -->
                <button class="p-2 text-gray-600 dark:text-white hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors relative">
                    <i class="fas fa-bell text-xl"></i>
                    <span id="notificationBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </button>

                <!-- User Dropdown -->
                <div class="relative">
                    <button onclick="toggleUserMenu()" class="flex items-center space-x-2 p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                        <div class="h-8 w-8 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                        <span class="text-gray-700 dark:text-gray-300 font-medium">{{ app.user.firstName }}</span>
                        <i class="fas fa-chevron-down text-gray-500 dark:text-gray-400 text-sm"></i>
                    </button>
                    
                    <div id="userMenu" class="hidden absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-slate-700 z-50">
                        <div class="p-4 border-b border-gray-200 dark:border-slate-700">
                            <p class="font-bold text-gray-900 dark:text-white">{{ app.user.firstName }} {{ app.user.lastName }}</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400">{{ app.user.email }}</p>
                        </div>
                        <a href="/profile" class="block px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                            <i class="fas fa-user ml-2"></i>
                            Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                        </a>
                        <a href="/products/my" class="block px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                            <i class="fas fa-box ml-2"></i>
                            Ù…Ù†ØªØ¬Ø§ØªÙŠ
                        </a>
                        <a href="/saved" class="block px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
                            <i class="fas fa-heart ml-2"></i>
                            Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª
                        </a>
                        <a href="/logout" class="block px-4 py-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20">
                            <i class="fas fa-sign-out-alt ml-2"></i>
                            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                        </a>
                    </div>
                </div>
                {% else %}
                <!-- Login Button -->
                <a href="/login" class="px-4 py-2 bg-gradient-to-r from-emerald-500 to-blue-600 text-white rounded-lg hover:shadow-lg transition-all">
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>

<script>
function toggleTheme() {
    const html = document.documentElement;
    const icon = document.getElementById('themeIcon');
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    icon.className = isDark ? 'fas fa-sun text-xl' : 'fas fa-moon text-xl';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
}

function initTheme() {
    const theme = localStorage.getItem('theme') || 'light';
    const icon = document.getElementById('themeIcon');
    if (theme === 'dark') {
        document.documentElement.classList.add('dark');
        if (icon) icon.className = 'fas fa-sun text-xl';
    }
}

function toggleLanguage() {
    document.getElementById('languageMenu').classList.toggle('hidden');
}

function toggleUserMenu() {
    document.getElementById('userMenu')?.classList.toggle('hidden');
}

// Close dropdowns when clicking outside
document.addEventListener('click', function(e) {
    if (!e.target.closest('#languageSwitcherContainer')) {
        document.getElementById('languageMenu')?.classList.add('hidden');
    }
    if (!e.target.closest('.relative')) {
        document.getElementById('userMenu')?.classList.add('hidden');
    }
});

// Initialize theme on load
document.addEventListener('DOMContentLoaded', initTheme);
</script>
